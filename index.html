<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Weight Training | Attendance</title>

<style>
:root{
  --bg1:#020617;
  --bg2:#0f172a;
  --card:#020617cc;
  --border:#1e293b;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --primary:#38bdf8;
  --success:#22c55e;
  --danger:#ef4444;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(circle at top,var(--bg2),var(--bg1) 70%);
  font-family:system-ui,"Noto Sans Thai",sans-serif;
  color:var(--text);
}

.card{
  width:100%;
  max-width:380px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:20px;
  padding:28px;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
}

.header{
  text-align:center;
  margin-bottom:22px;
}
.header h1{
  margin:0;
  font-size:26px;
}
.header p{
  margin:6px 0 0;
  font-size:14px;
  color:var(--muted);
}

.section{margin-top:18px}

label{
  display:block;
  margin-bottom:6px;
  font-size:14px;
  color:var(--muted);
}

input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--text);
  font-size:16px;
  outline:none;
}
input:focus{border-color:var(--primary)}

button{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  margin-top:12px;
}

.btn-main{
  background:linear-gradient(135deg,#38bdf8,#0ea5e9);
  color:#020617;
}

.btn-reset{
  background:transparent;
  color:var(--primary);
  border:1px solid var(--primary);
}

.divider{
  margin:22px 0;
  border:none;
  border-top:1px solid var(--border);
}

#msg{
  margin-top:16px;
  text-align:center;
  font-size:15px;
  min-height:22px;
}

.footer{
  margin-top:22px;
  text-align:center;
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>

<div class="card">
  <div class="header">
    <h1>Weight Training</h1>
    <p>Student Attendance System</p>
  </div>

  <!-- STUDENT -->
  <div class="section">
    <label>รหัสนักเรียน</label>
    <input id="sid" inputmode="numeric" placeholder="กรอกรหัสนักเรียน">
    <button class="btn-main" onclick="checkin()">เช็กชื่อเข้าเรียน</button>
  </div>

  <hr class="divider">

  <!-- TEACHER -->
  <div class="section">
    <label>รหัสอาจารย์ (เริ่มคาบใหม่)</label>
    <input id="teacher" type="password" placeholder="กรอกรหัสอาจารย์">
    <button class="btn-reset" onclick="resetSystem()">เริ่มคาบใหม่</button>
  </div>

  <div id="msg"></div>

  <div class="footer">
    Weight Training Club • Satit Chula<br>
    Secure Attendance System
  </div>
</div>

<script>
/* ===== Google Apps Script URL ===== */
const API_URL =
"https://script.google.com/macros/s/AKfycbx8fEgU6S6GzeFUMkId-oSeom-zxbVLaMR3k02y-anvHcw-CxYVv310-kaniVSTlmNcCQ/exec";

function checkin(){
  const sid = document.getElementById("sid").value.trim();
  if(!sid){
    show("กรุณากรอกรหัสนักเรียน",true);
    return;
  }
  send({ sid });
}

function resetSystem(){
  const teacher = document.getElementById("teacher").value.trim();
  if(!teacher){
    show("กรุณากรอกรหัสอาจารย์",true);
    return;
  }
  send({ teacher });
}

function send(payload){
  show("กำลังส่งข้อมูล...");
  fetch(API_URL,{
    method:"POST",
    mode:"no-cors",          // แก้ปัญหาเชื่อมต่อไม่ได้
    headers:{
      "Content-Type":"application/json"
    },
    body: JSON.stringify(payload)
  })
  .then(()=>{
    show("ส่งข้อมูลเรียบร้อย");
    document.getElementById("sid").value="";
    document.getElementById("teacher").value="";
  })
  .catch(()=>{
    show("เชื่อมต่อระบบไม่ได้",true);
  });
}

function show(text,isError=false){
  const el=document.getElementById("msg");
  el.textContent=text;
  el.style.color=isError? "#ef4444" : "#22c55e";
}
</script>

</body>
</html>
